<!DOCTYPE html>
<html>

<head>
    <title>Is Tor Tests</title>
    <script src="tor.js"></script>
</head>

<body>
    <p id="torStatus">Tor Status: Checking...</p>
    <p id="publicIP">Your public IP address: Loading...</p>

    <script>
        // Function to update the status
        function updateStatus(isTor) {
            const torStatus = document.getElementById("torStatus");
            if (isTor) {
                torStatus.textContent = 'Tor Status: The IP is a Tor exit node.';
            } else {
                torStatus.textContent = 'Tor Status: The IP is not a Tor exit node.';
            }
        }

        // Main execution block
        (async() => {
            const fileData = await fetchTorExitNodes();
            const ipAddress = await getPublicIP();

            // Update the status element
            updateStatus(isTor(ipAddress, fileData));

            const publicIP = document.getElementById("publicIP");
            publicIP.textContent = 'Your public IP address: ' + ipAddress;
        })();
    </script>
</body>

</html>
